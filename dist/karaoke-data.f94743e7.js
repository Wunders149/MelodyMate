function t(t,e,r,a){Object.defineProperty(t,e,{get:r,set:a,enumerable:!0,configurable:!0})}(0,globalThis.parcelRequireb585.register)("dCMSQ",function(e,r){t(e.exports,"karaokeAPI",()=>a),t(e.exports,"demoSongs",()=>i);let a=new class{constructor(){this.lrclibBase="https://lrclib.net/api",this.poyoBase="https://api.poyo.ai"}async searchSongs(t,e=""){try{let r=e?`${e} ${t}`:t,a=await fetch(`${this.lrclibBase}/search?q=${encodeURIComponent(r)}`);if(!a.ok)throw Error("Search failed");return(await a.json()).slice(0,10)}catch(t){return console.error("LRCLIB search error:",t),[]}}async getTimestampedLyrics(t,e,r="",a=0){try{let i=new URLSearchParams({track_name:t,artist_name:e,album_name:r,duration:Math.floor(a)}),s=await fetch(`${this.lrclibBase}/get?${i}`);if(!s.ok)throw Error("Lyrics not found");let n=await s.json();if(n.syncedLyrics)return this.parseLRCLyrics(n.syncedLyrics);if(n.plainLyrics)return this.createEstimatedTimestamps(n.plainLyrics,a);return null}catch(t){return console.error("LRCLIB lyrics error:",t),null}}parseLRCLyrics(t){let e=t.split("\n"),r=[];return e.forEach(t=>{let e=t.match(/\[(\d+):(\d+\.\d+)\](.*)/);if(e){let t=parseInt(e[1]),a=parseFloat(e[2]),i=e[3].trim();i&&r.push({time:60*t+a,text:i})}}),r.sort((t,e)=>t.time-e.time)}createEstimatedTimestamps(t,e){let r=t.split("\n").filter(t=>t.trim()),a=[],i=e/r.length;return r.forEach((t,e)=>{a.push({time:e*i,text:t.trim()})}),a}async getPoyoLyrics(t,e){try{let r=await fetch(`${this.poyoBase}/lyrics`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({track:t,artist:e})});if(!r.ok)throw Error("PoYo API failed");let a=await r.json();if(a.lyrics&&a.lyrics.length>0)return a.lyrics.map(t=>({time:t.time,text:t.text}));return null}catch(t){return console.error("PoYo API error:",t),null}}async getLyrics(t,e,r="",a=0){let i=await this.getTimestampedLyrics(t,e,r,a);return i||(i=await this.getPoyoLyrics(t,e)),i}async searchAndGetSong(t,e){let r=await this.searchSongs(t,e);if(0===r.length)return null;let a=r[0],i=await this.getLyrics(a.name,a.artistName,a.albumName,a.duration);return i?{id:`${a.artistName}-${a.name}`.toLowerCase().replace(/\s+/g,"-"),title:a.name,artist:a.artistName,album:a.albumName,duration:a.duration,instrumental:this.generateInstrumentalUrl(a),lyrics:i,source:"api"}:null}generateInstrumentalUrl(t){return"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav"}},i={"happy-birthday":{title:"Happy Birthday",artist:"Traditional",instrumental:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav",duration:30,lyrics:[{time:0,text:"Happy birthday to you,"},{time:5,text:"Happy birthday to you,"},{time:10,text:"Happy birthday dear [Name],"},{time:15,text:"Happy birthday to you!"}]}}});
//# sourceMappingURL=karaoke-data.f94743e7.js.map
